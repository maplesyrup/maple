<%= render "shared/header" %>
<%= render "shared/subheader" %>

<div class="container-fluid">
  <div id="posts" class="row glimpses">
    <div class="span4 glimpse-column">
    </div>

<!--
    <div class="span4 glimpse-column">
      Second column
    </div>

    <div class="span4 glimpse-column">
      Third column
    </div>

    <div class="span4 glimpse-column">
      Fourth column
    </div>
-->
  </div>

</div>

<script type="text/javascript">
  $(document).ready(function () {
    var posts = <%= Post.public_models(@posts).html_safe -%>;
    console.log(<%= Post.public_models(@posts).to_json.html_safe -%>)

    <% @posts.each do |post| %>
      console.log(<%= post.to_json.html_safe %>);
      console.log('<%= image_tag post.image.url(:medium) %>');
    <% end %>

    window.router = new Maple.Routers.PostsRouter({ posts: posts});
    Backbone.history.start();
  });

</script>
